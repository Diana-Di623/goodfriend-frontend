# 心愿心语模块使用说明

## 功能概览

心愿心语是好朋友心理应用中的一个社交分享模块，为用户提供一个安全、温馨的树洞平台，让用户可以匿名或实名分享内心的想法和情感。

## 主要功能

### 1. 分享心语
- ✨ 支持文字内容分享（最多500字）
- 😊 内置表情选择器，24种常用表情
- 📝 实时输入反馈，自动高度调整
- 🎯 一键发布，即时生效

### 2. 互动功能
- 👍 点赞/取消点赞功能
- 💬 引用回复其他用户的心语
- 📋 引用预览，清晰显示被引用内容
- ⚡ 实时互动反馈

### 3. 用户体验
- 🔒 支持匿名/实名发布选择
- 🌸 温馨的粉紫色主题设计
- 📱 移动端优化的响应式布局
- 🎨 渐变背景和毛玻璃效果

### 4. 数据管理
- 💾 本地存储与云端同步
- 🔄 下拉刷新获取最新内容
- 📄 上拉加载更多历史内容
- 🚀 离线优先，网络恢复时自动同步

## 页面结构

### 头部区域
- 返回按钮
- 页面标题"心愿心语"
- 副标题"🌸 树洞时光 🌸"

### 引导卡片
温馨的使用说明，告知用户这里是安全的分享空间。

### 心语列表
- 用户头像（匿名用户显示"匿"字）
- 用户昵称和发布时间
- 心语内容（支持引用显示）
- 互动按钮（点赞、引用）

### 发布区域
- 多行文本输入框（自动调整高度）
- 表情选择器
- 引用预览（如果有引用）
- 发布按钮

## 技术特色

### 1. Vue 3 + Composition API
- 使用最新的 `<script setup>` 语法
- 响应式数据管理
- 组合式API提升代码复用性

### 2. uni-app 跨平台
- 支持 H5、微信小程序、APP 等多端
- 统一的页面生命周期管理
- 原生体验的交互效果

### 3. 数据持久化
- localStorage 本地存储
- API 云端同步
- 离线优先策略

### 4. 用户体验优化
- 加载状态反馈
- 空状态提示
- 错误处理机制
- 动画过渡效果

## 样式设计

### 色彩方案
- 主色调：粉色 (#ec407a) 到紫色 (#ab47bc) 渐变
- 背景：多层渐变，营造温馨氛围
- 卡片：白色半透明，毛玻璃效果

### 交互设计
- 按钮点击反馈
- 滑动动画
- 表情选择器动画
- 输入框聚焦效果

## 开发要点

### 1. 状态管理
```vue
// 主要数据状态
const comments = ref([])        // 心语列表
const inputText = ref('')       // 输入内容
const quotedComment = ref(null) // 引用的心语
const isLoading = ref(false)    // 加载状态
```

### 2. 生命周期
```vue
onMounted()         // 页面初始化
onShow()           // 页面显示时刷新
onPullDownRefresh() // 下拉刷新
onReachBottom()     // 上拉加载更多
```

### 3. API 集成
```javascript
// 本地存储优先，网络备份
await loadWishList()    // 加载列表
await publishWish()     // 发布心语
await toggleLike()      // 切换点赞
```

## 使用流程

1. **进入页面**：从首页点击"心愿心语"导航
2. **浏览内容**：查看其他用户的心语分享
3. **互动交流**：点赞或引用感兴趣的内容
4. **发布心语**：输入内容，选择表情，点击发布
5. **刷新获取**：下拉刷新获取最新内容

## 注意事项

- 需要登录后才能使用完整功能
- 支持最多500字的文字内容
- 网络不好时会优先使用本地缓存
- 引用内容会自动截取前30个字符预览

## 扩展功能

未来可以考虑添加的功能：
- 图片分享支持
- 话题标签系统
- 私信功能
- 心理咨询师回复
- 情感分析和建议
- 心情统计图表

---

**心愿心语**：让每一份情感都有被倾听的地方 💕
